---
---

<div id="reading-progress" class="fixed top-0 left-0 z-[9999] bg-primary-600" style="width:0%; height:4px; transition:width 120ms linear; pointer-events:none;"></div>

<script>
	(function () {
		const bar = document.getElementById('reading-progress');
		if (!bar) return;

		const getScroll = () => {
			const doc = document.documentElement;
			const scrollTop = (document.scrollingElement && document.scrollingElement.scrollTop) || doc.scrollTop || 0;
			const scrollHeight = doc.scrollHeight || 0;
			const clientHeight = doc.clientHeight || 0;
			const scrollable = Math.max(scrollHeight - clientHeight, 0);
			const pct = scrollable > 0 ? (scrollTop / scrollable) * 100 : 0;
			return Math.min(100, Math.max(0, pct));
		};

		const update = () => {
			const pct = getScroll();
			bar.style.width = pct + '%';
		};

		const onScroll = () => requestAnimationFrame(update);

		update();
		window.addEventListener('scroll', onScroll, { passive: true });
		window.addEventListener('resize', onScroll);
	})();
</script>
